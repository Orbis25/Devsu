<section style="padding: 30px;">
        <h2>Clientes</h2>
  <div class="section-header">
    <input
      type="text"
      placeholder="Buscar por nombre o identificación..."
      [value]="searchQuery"
      (input)="handleChangeSearch($event)"
    />
    <button class="btn" (click)="openModal()">Nuevo</button>
  </div>
<div class="client-list">

  <div *ngIf="isLoading" class="loading-spinner">Cargando...</div>

  <ng-container *ngIf="!isLoading && data">
    <app-table
      [columns]="columns"
      [data]="data"
      [currentPage]="data.actualPage"

      (changePage)="handleChangePage($event)"
      (actionClick)="handleTableAction($event)"
    ></app-table>
  </ng-container>
</div>

  <app-modal [open]="showForm" (onClose)="showForm = false">
    <div class="modal-content">
      <h2>{{ editId ? 'Editar Usuario' : 'Agregar Usuario' }}</h2>
      <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="name">Nombre:</label>
          <input
            type="text"
            id="name"
            formControlName="name"
            required
          />
          <div *ngIf="userForm.get('name')?.invalid && userForm.get('name')?.touched" class="error-message">
            Nombre es requerido.
          </div>
        </div>
        <div class="form-group">
          <label for="identification">Identificación:</label>
          <input
            type="text"
            id="identification"
            formControlName="identification"
            required
          />
          <div *ngIf="userForm.get('identification')?.invalid && userForm.get('identification')?.touched" class="error-message">
            <span *ngIf="userForm.get('identification')?.errors?.['required']">Identificación es requerida.</span>
            <span *ngIf="userForm.get('identification')?.errors?.['pattern']">Solo números.</span>
          </div>
        </div>
        <div class="form-group">
          <label for="gender">Género:</label>
          <select id="gender" formControlName="gender">
            <option value="hombre">Hombre</option>
            <option value="mujer">Mujer</option>
            <option value="otro">Otro</option>
          </select>
        </div>
        <div class="form-group">
          <label for="age">Edad:</label>
          <input
            type="number"
            id="age"
            formControlName="age"
            required
          />
          <div *ngIf="userForm.get('age')?.invalid && userForm.get('age')?.touched" class="error-message">
            <span *ngIf="userForm.get('age')?.errors?.['required']">Edad es requerida.</span>
            <span *ngIf="userForm.get('age')?.errors?.['min']">La edad mínima es de 18 años.</span>
            <span *ngIf="userForm.get('age')?.errors?.['pattern']">La edad debe ser un número entero.</span>
          </div>
        </div>
        <div class="form-group">
          <label for="phone">Teléfono:</label>
          <input
            type="text"
            id="phone"
            formControlName="phone"
          />
          <div *ngIf="userForm.get('phone')?.invalid && userForm.get('phone')?.touched" class="error-message">
            <span *ngIf="userForm.get('phone')?.errors?.['required']">Teléfono es requerido.</span>
            <span *ngIf="userForm.get('phone')?.errors?.['pattern']">Solo números.</span>
          </div>
        </div>
        <div class="form-group">
          <label for="address">Dirección:</label>
          <input
            type="text"
            id="address"
            formControlName="address"
          />
          <div *ngIf="userForm.get('address')?.invalid && userForm.get('address')?.touched" class="error-message">
            Dirección es requerida.
          </div>
        </div>
        <div class="form-group">
          <label for="clientId">ID Cliente:</label>
          <input
            type="text"
            id="clientId"
            formControlName="clientId"
          />
          <div *ngIf="userForm.get('clientId')?.invalid && userForm.get('clientId')?.touched" class="error-message">
            ID Cliente es requerido.
          </div>
        </div>
        <div class="form-group">
          <label for="password">Contraseña:</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            [required]="!editId"
          />
          <div *ngIf="userForm.get('password')?.invalid && userForm.get('password')?.touched" class="error-message">
            <span *ngIf="userForm.get('password')?.errors?.['required']">Contraseña es requerida.</span>
            <span *ngIf="userForm.get('password')?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres.</span>
          </div>
        </div>
        <button type="submit" class="btn">Guardar</button>
      </form>
    </div>
  </app-modal>
</section>